from sara_compis1_tools.StateAFD import StateAFD
from lexEval import LexEval
from sara_compis1_tools.Error import Error
import sys

mega = [StateAFD(name='init',transitions={'ε': 'A'},accepting=False,start=True, value=None),StateAFD(name='A',transitions={'a': 'B', 'b': 'B', 'c': 'B', 'd': 'B', 'e': 'B', 'f': 'B', 'g': 'B', 'h': 'B', 'i': 'B', 'j': 'B', 'k': 'B', 'l': 'B', 'm': 'B', 'n': 'B', 'o': 'B', 'p': 'B', 'q': 'B', 'r': 'B', 's': 'B', 't': 'B', 'u': 'B', 'v': 'B', 'w': 'B', 'x': 'B', 'y': 'B', 'z': 'B', 'A': 'B', 'B': 'B', 'C': 'B', 'D': 'B', 'E': 'B', 'F': 'B', 'G': 'B', 'H': 'B', 'I': 'B', 'J': 'B', 'K': 'B', 'L': 'B', 'M': 'B', 'N': 'B', 'O': 'B', 'P': 'B', 'Q': 'B', 'R': 'B', 'S': 'B', 'T': 'B', 'U': 'B', 'V': 'B', 'W': 'B', 'X': 'B', 'Y': 'B', 'Z': 'B'},accepting=False,start=False, value=None),StateAFD(name='B',transitions={'a': 'C', 'b': 'B', 'c': 'B', 'd': 'B', 'e': 'B', 'f': 'B', 'g': 'B', 'h': 'B', 'i': 'B', 'j': 'B', 'k': 'B', 'l': 'B', 'm': 'B', 'n': 'B', 'o': 'B', 'p': 'B', 'q': 'B', 'r': 'B', 's': 'B', 't': 'B', 'u': 'B', 'v': 'B', 'w': 'B', 'x': 'B', 'y': 'B', 'z': 'B', 'A': 'B', 'B': 'B', 'C': 'B', 'D': 'B', 'E': 'B', 'F': 'B', 'G': 'B', 'H': 'B', 'I': 'B', 'J': 'B', 'K': 'B', 'L': 'B', 'M': 'B', 'N': 'B', 'O': 'B', 'P': 'B', 'Q': 'B', 'R': 'B', 'S': 'B', 'T': 'B', 'U': 'B', 'V': 'B', 'W': 'B', 'X': 'B', 'Y': 'B', 'Z': 'B', '0': 'B', '1': 'B', '2': 'B', '3': 'B', '4': 'B', '5': 'B', '6': 'B', '7': 'B', '8': 'B', '9': 'B'},accepting=False,start=False, value=None),StateAFD(name='C',transitions={'a': 'C', 'b': 'D', 'c': 'B', 'd': 'B', 'e': 'B', 'f': 'B', 'g': 'B', 'h': 'B', 'i': 'B', 'j': 'B', 'k': 'B', 'l': 'B', 'm': 'B', 'n': 'B', 'o': 'B', 'p': 'B', 'q': 'B', 'r': 'B', 's': 'B', 't': 'B', 'u': 'B', 'v': 'B', 'w': 'B', 'x': 'B', 'y': 'B', 'z': 'B', 'A': 'B', 'B': 'B', 'C': 'B', 'D': 'B', 'E': 'B', 'F': 'B', 'G': 'B', 'H': 'B', 'I': 'B', 'J': 'B', 'K': 'B', 'L': 'B', 'M': 'B', 'N': 'B', 'O': 'B', 'P': 'B', 'Q': 'B', 'R': 'B', 'S': 'B', 'T': 'B', 'U': 'B', 'V': 'B', 'W': 'B', 'X': 'B', 'Y': 'B', 'Z': 'B', '0': 'B', '1': 'B', '2': 'B', '3': 'B', '4': 'B', '5': 'B', '6': 'B', '7': 'B', '8': 'B', '9': 'B'},accepting=False,start=False, value=None),StateAFD(name='D',transitions={'a': 'C', 'b': 'B', 'c': 'E', 'd': 'B', 'e': 'B', 'f': 'B', 'g': 'B', 'h': 'B', 'i': 'B', 'j': 'B', 'k': 'B', 'l': 'B', 'm': 'B', 'n': 'B', 'o': 'B', 'p': 'B', 'q': 'B', 'r': 'B', 's': 'B', 't': 'B', 'u': 'B', 'v': 'B', 'w': 'B', 'x': 'B', 'y': 'B', 'z': 'B', 'A': 'B', 'B': 'B', 'C': 'B', 'D': 'B', 'E': 'B', 'F': 'B', 'G': 'B', 'H': 'B', 'I': 'B', 'J': 'B', 'K': 'B', 'L': 'B', 'M': 'B', 'N': 'B', 'O': 'B', 'P': 'B', 'Q': 'B', 'R': 'B', 'S': 'B', 'T': 'B', 'U': 'B', 'V': 'B', 'W': 'B', 'X': 'B', 'Y': 'B', 'Z': 'B', '0': 'B', '1': 'B', '2': 'B', '3': 'B', '4': 'B', '5': 'B', '6': 'B', '7': 'B', '8': 'B', '9': 'B'},accepting=False,start=False, value=None),StateAFD(name='E',transitions={'a': 'C', 'b': 'B', 'c': 'B', 'd': 'B', 'e': 'B', 'f': 'B', 'g': 'B', 'h': 'B', 'i': 'B', 'j': 'B', 'k': 'B', 'l': 'B', 'm': 'B', 'n': 'B', 'o': 'B', 'p': 'B', 'q': 'B', 'r': 'B', 's': 'B', 't': 'B', 'u': 'B', 'v': 'B', 'w': 'B', 'x': 'B', 'y': 'B', 'z': 'B', 'A': 'B', 'B': 'B', 'C': 'B', 'D': 'B', 'E': 'B', 'F': 'B', 'G': 'B', 'H': 'B', 'I': 'B', 'J': 'B', 'K': 'B', 'L': 'B', 'M': 'B', 'N': 'B', 'O': 'B', 'P': 'B', 'Q': 'B', 'R': 'B', 'S': 'B', 'T': 'B', 'U': 'B', 'V': 'B', 'W': 'B', 'X': 'B', 'Y': 'B', 'Z': 'B', '0': 'B', '1': 'B', '2': 'B', '3': 'B', '4': 'B', '5': 'B', '6': 'B', '7': 'B', '8': 'B', '9': 'B'},accepting=True,start=False, value='print("Identificador\\n")'),StateAFD(name='init',transitions={'ε': 'F'},accepting=False,start=True, value=None),StateAFD(name='F',transitions={'0': 'G', '1': 'G', '2': 'G', '3': 'G', '4': 'G', '5': 'G', '6': 'G', '7': 'G', '8': 'G', '9': 'G'},accepting=False,start=False, value=None),StateAFD(name='G',transitions={'0': 'G', '1': 'G', '2': 'G', '3': 'G', '4': 'G', '5': 'G', '6': 'G', '7': 'G', '8': 'G', '9': 'G'},accepting=True,start=False, value='print("Número entero\\n")'),StateAFD(name='init',transitions={'ε': 'H'},accepting=False,start=True, value=None),StateAFD(name='H',transitions={'0': 'I', '1': 'I', '2': 'I', '3': 'I', '4': 'I', '5': 'I', '6': 'I', '7': 'I', '8': 'I', '9': 'I'},accepting=False,start=False, value=None),StateAFD(name='I',transitions={'0': 'I', '1': 'I', '2': 'I', '3': 'I', '4': 'I', '5': 'I', '6': 'I', '7': 'I', '8': 'I', '9': 'I', '.': 'J'},accepting=False,start=False, value=None),StateAFD(name='J',transitions={'0': 'K', '1': 'K', '2': 'K', '3': 'K', '4': 'K', '5': 'K', '6': 'K', '7': 'K', '8': 'K', '9': 'K'},accepting=False,start=False, value=None),StateAFD(name='K',transitions={'0': 'K', '1': 'K', '2': 'K', '3': 'K', '4': 'K', '5': 'K', '6': 'K', '7': 'K', '8': 'K', '9': 'K'},accepting=True,start=False, value='print("Número decimal\\n")'),StateAFD(name='init',transitions={'ε': 'L'},accepting=False,start=True, value=None),StateAFD(name='L',transitions={'f': 'M'},accepting=False,start=False, value=None),StateAFD(name='M',transitions={'o': 'N'},accepting=False,start=False, value=None),StateAFD(name='N',transitions={'r': 'O'},accepting=False,start=False, value=None),StateAFD(name='O',transitions={},accepting=True,start=False, value='print("Palabra reservada: For\\n")'),StateAFD(name='init',transitions={'ε': 'P'},accepting=False,start=True, value=None),StateAFD(name='P',transitions={'"': 'Q'},accepting=False,start=False, value=None),StateAFD(name='Q',transitions={'a': 'R', 'b': 'R', 'c': 'R', 'd': 'R', 'e': 'R', 'f': 'R', 'g': 'R', 'h': 'R', 'i': 'R', 'j': 'R', 'k': 'R', 'l': 'R', 'm': 'R', 'n': 'R', 'o': 'R', 'p': 'R', 'q': 'R', 'r': 'R', 's': 'R', 't': 'R', 'u': 'R', 'v': 'R', 'w': 'R', 'x': 'R', 'y': 'R', 'z': 'R', 'A': 'R', 'B': 'R', 'C': 'R', 'D': 'R', 'E': 'R', 'F': 'R', 'G': 'R', 'H': 'R', 'I': 'R', 'J': 'R', 'K': 'R', 'L': 'R', 'M': 'R', 'N': 'R', 'O': 'R', 'P': 'R', 'Q': 'R', 'R': 'R', 'S': 'R', 'T': 'R', 'U': 'R', 'V': 'R', 'W': 'R', 'X': 'R', 'Y': 'R', 'Z': 'R', '0': 'R', '1': 'R', '2': 'R', '3': 'R', '4': 'R', '5': 'R', '6': 'R', '7': 'R', '8': 'R', '9': 'R', ' ': 'R'},accepting=False,start=False, value=None),StateAFD(name='R',transitions={'"': 'S', 'a': 'R', 'b': 'R', 'c': 'R', 'd': 'R', 'e': 'R', 'f': 'R', 'g': 'R', 'h': 'R', 'i': 'R', 'j': 'R', 'k': 'R', 'l': 'R', 'm': 'R', 'n': 'R', 'o': 'R', 'p': 'R', 'q': 'R', 'r': 'R', 's': 'R', 't': 'R', 'u': 'R', 'v': 'R', 'w': 'R', 'x': 'R', 'y': 'R', 'z': 'R', 'A': 'R', 'B': 'R', 'C': 'R', 'D': 'R', 'E': 'R', 'F': 'R', 'G': 'R', 'H': 'R', 'I': 'R', 'J': 'R', 'K': 'R', 'L': 'R', 'M': 'R', 'N': 'R', 'O': 'R', 'P': 'R', 'Q': 'R', 'R': 'R', 'S': 'R', 'T': 'R', 'U': 'R', 'V': 'R', 'W': 'R', 'X': 'R', 'Y': 'R', 'Z': 'R', '0': 'R', '1': 'R', '2': 'R', '3': 'R', '4': 'R', '5': 'R', '6': 'R', '7': 'R', '8': 'R', '9': 'R', ' ': 'R'},accepting=False,start=False, value=None),StateAFD(name='S',transitions={},accepting=True,start=False, value='print("Cadena\\n")')]
errors = set([Error(line=18, error='Error: Token no definido: palabra_reservada_if en archivo .yal')])

if len(sys.argv) < 2:
	print('Por favor ingrese el archivo plano')
	sys.exit(1)
txt_file = sys.argv[1]

lex = LexEval(txt_file)
results = lex.evaluate(mega, errors)
lex.print_tokens(results)

from sara_compis1_tools.Visualizer import Visualizer
v = Visualizer()
v.draw_mega_afd(mega)
